<header *ngIf="tournament">
  <h2>
    <span>{{ tournament.name }}</span>
    <small>{{ tournament.startDate | date: 'dd.MM.yyyy' }}</small>
  </h2>
  <button type="button" class="pull-right primary raised" *appIfAuth="'Secretariat'" [routerLink]="['/display', tournament.id]">
    <app-fa name="tv" fw="true"></app-fa>
    <span>Display </span>
  </button>
  <button type="button" class="pull-right" *appIfAuth="'Admin'" [routerLink]="['/configure/tournament', tournament.id]">
    <app-fa name="cog" fw="true"></app-fa>
    <span>Settings </span>
  </button>
</header>

<table *ngIf="tournament && schedule.length" role="list">
  <thead>
    <tr>
      <th>Start #</th>
      <th>Team</th>
      <th>Division</th>
      <th>Discipline</th>
      <th>Score</th>
      <th *appIfAuth="'Secretariat'"></th>
    </tr>
  </thead>
  <tbody *ngFor="let item of schedule">
    <tr *ngIf="selected !== item" (click)="select(item)" role="listitem" [ngClass]="{hasScore: score(item) > 0}">
      <td>{{ item.startNumber }}</td>
      <td>{{ item.team.name }} </td>
      <td>{{ division(item.team) }}</td>
      <td>{{ item.discipline.name }}</td>
      <td>{{ score(item) | number:'1.3-3' }}</td>
      <td *appIfAuth="'Secretariat'">
        <button *ngIf="score(item) === 0">Start</button>
        <button *ngIf="score(item) > 0 && !item.published">Publish</button>
      </td>
    </tr>
    <tr *ngIf="selected === item">
      <td colspan="6" class="editor">
        <scoreboard [participant]="item" (onClose)="closeEditor()"></scoreboard>
      </td>
    </tr>
  </tbody>
</table>